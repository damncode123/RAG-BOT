@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --foreground-rgb: 15, 23, 42;
  --background-start-rgb: 248, 250, 252;
  --background-end-rgb: 255, 255, 255;
  --primary-rgb: 59, 130, 246;
  --primary-dark-rgb: 37, 99, 235;
  --secondary-rgb: 99, 102, 241;
  --accent-rgb: 16, 185, 129;
  --surface-rgb: 255, 255, 255;
  --surface-secondary-rgb: 248, 250, 252;
  --border-rgb: 226, 232, 240;
  --text-primary-rgb: 15, 23, 42;
  --text-secondary-rgb: 71, 85, 105;
  --text-muted-rgb: 148, 163, 184;
}

.dark {
  --foreground-rgb: 248, 250, 252;
  --background-start-rgb: 15, 23, 42;
  --background-end-rgb: 30, 41, 59;
  --primary-rgb: 59, 130, 246;
  --primary-dark-rgb: 37, 99, 235;
  --secondary-rgb: 99, 102, 241;
  --accent-rgb: 16, 185, 129;
  --surface-rgb: 30, 41, 59;
  --surface-secondary-rgb: 51, 65, 85;
  --border-rgb: 51, 65, 85;
  --text-primary-rgb: 248, 250, 252;
  --text-secondary-rgb: 203, 213, 225;
  --text-muted-rgb: 148, 163, 184;
}

* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

html {
  scroll-behavior: smooth;
  overflow-x: hidden; /* Prevent horizontal scroll */
}

body {
  color: rgb(var(--text-primary-rgb));
  background: linear-gradient(
      135deg,
      rgb(var(--background-start-rgb)) 0%,
      rgb(var(--background-end-rgb)) 100%
    );
  min-height: 100vh;
  font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  transition: background-color 0.3s ease, color 0.3s ease;
  overflow-x: hidden; /* Prevent horizontal scroll */
  width: 100%;
  max-width: 100vw; /* Ensure body doesn't exceed viewport width */
}

.message-transition {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.message {
  @apply p-3 sm:p-4 lg:p-6 rounded-xl sm:rounded-2xl mb-4 sm:mb-6 max-w-[90%] sm:max-w-[85%] shadow-lg border;
  animation: fadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.user-message {
  @apply ml-auto;
  background: linear-gradient(135deg, rgb(59 130 246) 0%, rgb(37 99 235) 100%);
  color: white;
  border-color: rgb(59 130 246 / 0.3);
  box-shadow: 0 10px 25px -5px rgb(59 130 246 / 0.2), 0 4px 6px -2px rgb(59 130 246 / 0.1);
}

.bot-message {
  @apply mr-auto;
  background: rgb(255 255 255);
  color: rgb(15 23 42);
  border-color: rgb(226 232 240 / 0.3);
  box-shadow: 0 10px 25px -5px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.05);
}

.dark .bot-message {
  background: rgb(30 41 59);
  color: rgb(248 250 252);
  border-color: rgb(51 65 85 / 0.3);
}

.typing-indicator {
  @apply flex space-x-2 items-center p-4;
}

.typing-dot {
  @apply w-3 h-3 rounded-full;
  background: rgb(var(--primary-rgb));
  animation: blink 1.4s infinite;
  animation-fill-mode: both;
}

.typing-dot:nth-child(2) {
  animation-delay: 0.2s;
}

.typing-dot:nth-child(3) {
  animation-delay: 0.4s;
}

@keyframes blink {
  0%, 100% {
    opacity: 0.3;
    transform: scale(0.8);
  }
  50% {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.chat-container {
  @apply h-[60vh] sm:h-[65vh] lg:h-[70vh] xl:h-[75vh] overflow-y-auto p-3 sm:p-4 lg:p-6;
  background: rgb(248 250 252 / 0.5);
  scroll-behavior: smooth;
  scrollbar-width: thin;
  scrollbar-color: rgb(148 163 184) transparent;
}

.dark .chat-container {
  background: rgb(51 65 85 / 0.5);
  scrollbar-color: rgb(100 116 139) transparent;
}

.chat-container::-webkit-scrollbar {
  width: 6px;
}

.chat-container::-webkit-scrollbar-track {
  background: transparent;
}

.chat-container::-webkit-scrollbar-thumb {
  background: rgb(var(--border-rgb));
  border-radius: 3px;
}

.chat-container::-webkit-scrollbar-thumb:hover {
  background: rgb(var(--text-muted-rgb));
}

.chat-input {
  @apply relative rounded-2xl shadow-xl mt-6 border backdrop-blur-sm;
  background: rgb(var(--surface-rgb) / 0.9);
  border-color: rgb(var(--border-rgb) / 0.3);
  box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 10px 10px -5px rgb(0 0 0 / 0.04);
}

.message-timestamp {
  @apply text-xs mt-2 font-medium;
  color: rgb(var(--text-muted-rgb));
}

.toolbar-button {
  @apply p-3 transition-all duration-200 rounded-xl;
  color: rgb(var(--text-secondary-rgb));
}

.toolbar-button:hover {
  color: rgb(var(--primary-rgb));
  background: rgb(var(--primary-rgb) / 0.1);
  transform: scale(1.05);
}

.chat-header {
  @apply flex justify-between items-center py-6 px-8 rounded-t-2xl border-b backdrop-blur-sm;
  background: rgb(var(--surface-rgb) / 0.9);
  border-color: rgb(var(--border-rgb) / 0.3);
}

/* Additional utility classes for modern UI */
.glass-effect {
  backdrop-filter: blur(10px);
  background: rgb(var(--surface-rgb) / 0.8);
  border: 1px solid rgb(var(--border-rgb) / 0.2);
}

.gradient-primary {
  background: linear-gradient(135deg, rgb(var(--primary-rgb)) 0%, rgb(var(--primary-dark-rgb)) 100%);
}

.gradient-secondary {
  background: linear-gradient(135deg, rgb(var(--secondary-rgb)) 0%, rgb(var(--accent-rgb)) 100%);
}

.text-gradient {
  background: linear-gradient(135deg, rgb(var(--primary-rgb)) 0%, rgb(var(--secondary-rgb)) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.shadow-glow {
  box-shadow: 0 0 20px rgb(var(--primary-rgb) / 0.3);
}

.hover-lift {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.hover-lift:hover {
  transform: translateY(-2px);
  box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 10px 10px -5px rgb(0 0 0 / 0.04);
}

/* Overflow prevention utilities */
.no-overflow {
  overflow-x: hidden;
  max-width: 100vw;
  width: 100%;
}

.container-safe {
  max-width: 100%;
  overflow-x: hidden;
  box-sizing: border-box;
}

/* Mobile-first responsive containers */
.auth-container {
  width: 100%;
  max-width: 100vw;
  overflow-x: hidden;
  padding-left: clamp(0.75rem, 4vw, 2rem);
  padding-right: clamp(0.75rem, 4vw, 2rem);
}

/* Ensure all elements stay within viewport */
* {
  max-width: 100%;
  box-sizing: border-box;
}
